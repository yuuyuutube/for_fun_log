!function(n,e){var t,s,i,o,r;t={speed:500,browsers:{webkit:{prefix:"-webkit-",endEvent:"webkitTransitionEnd"},mozilla:{prefix:"-moz-",endEvent:"transitionend"},opera:{prefix:"-o-",endEvent:"oTransitionEnd"},msie:{prefix:"-ms-",endEvent:"TransitionEnd"},fallback:{prefix:"",endEvent:"transitionend"}}},n.browser.webkit?(s=t.browsers.webkit.prefix,o=t.browsers.webkit.endEvent):n.browser.msie?(s=t.browsers.msie.prefix,o=t.browsers.msie.endEvent):n.browser.mozilla?(s=t.browsers.mozilla.prefix,o=t.browsers.mozilla.endEvent):n.browser.opera?(s=t.browsers.opera.prefix,o=t.browsers.opera.endEvent):(s=t.browsers.fallback.prefix,o=t.browsers.fallback.endEvent),i=function(e,i,r,a){if(!r)var r=t.speed;console.log(i),Modernizr.csstransitions?(console.log("using native css-transitions"),e.data("css3animate",!0),e.css(s+"transition","all "+r+"ms ease-in-out"),e.css(i),e.data("animationCss",i),e.bind(o,function(t){e.unbind(o),n.isFunction(a)&&a(n(t.target),t)})):(console.log("falling back to jquery animation"),e.animate(i,r,function(){n.isFunction(a)&&a(n(this))}))},methods={run:function(e,t,s){return this.each(function(){var o;o=n(this),i(o,e,t,s)})},setDefaults:function(e){n.extend({},t,e)},stop:function(e,t){return this.each(function(){var e=n(this),s={},o=e.data("animationCss");for(var r in o)s[r]=e.css(r);t?i(e,s,1,function(){i(e,o,1)}):(console.log("pause"),i(e,s,1)),console.log("stop was called")})}},n.fn.css3animate=function(e){if("undefined"==typeof Modernizr)n.error("Please include modernizer.js to your HTML");else{if(methods[e])return methods[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"==typeof e||!e)return methods.run.apply(this,arguments);n.error("Method "+e+" does not exist on jQuery.css3animate")}},Modernizr.csstransitions&&(r=n.fn.stop(),n.fn.stop=function(n,e){return this.data("css3animate")?methods.stop.apply(this,arguments):r.call(this,arguments)})}(jQuery),$(function(){function n(){t.html(e.css("width")+"<br />"+e.css("height")+"<br />"+e.css("-webkit-transition-duration"))}var e=$("#animatable"),t=$("#monitor"),s=setInterval(n,100);$("button.c1").click(function(){clearInterval(s),e.stop()}),$("button.c2").click(function(){clearInterval(s),e.stop(!0,!0)}),e.css3animate({height:"200px",width:"400px"},1500,function(n){n.html("with callback")})});